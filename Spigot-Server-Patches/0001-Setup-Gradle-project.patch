From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Kyle Wood <demonwav@gmail.com>
Date: Thu, 10 Dec 2020 20:54:19 -0800
Subject: [PATCH] Setup Gradle project


diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000000000000000000000000000000000000..3e05459f27c4c5697ae65da504d67a6a2f617b57
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1,42 @@
+.gradle/
+build/
+
+# Eclipse stuff
+/.classpath
+/.project
+/.settings
+
+# netbeans
+/nbproject
+nb*.xml
+
+# we use maven!
+/build.xml
+
+# maven
+/target
+dependency-reduced-pom.xml
+
+# vim
+.*.sw[a-p]
+
+# various other potential build files
+/build
+/bin
+/dist
+/manifest.mf
+
+/world
+/logs
+
+# Mac filesystem dust
+.DS_Store
+
+# intellij
+*.iml
+*.ipr
+*.iws
+.idea/
+
+/src/main/resources/achievement
+/src/main/resources/lang
diff --git a/build.gradle.kts b/build.gradle.kts
new file mode 100644
index 0000000000000000000000000000000000000000..3f1911e97bee442e5714a817c1eeb7c8d398e480
--- /dev/null
+++ b/build.gradle.kts
@@ -0,0 +1,63 @@
+import com.github.jengelman.gradle.plugins.shadow.transformers.AppendingTransformer
+import java.time.Instant
+
+plugins {
+    java
+    id("com.github.johnrengelman.shadow") version "6.0.0"
+}
+
+val mcVersion = providers.gradleProperty("mcVersion").forUseAtConfigurationTime().get()
+
+repositories {
+    maven("https://libraries.minecraft.net/")
+}
+
+dependencies {
+    implementation(project(":Paper-API"))
+    implementation("jline:jline:2.12.1")
+    implementation("org.apache.logging.log4j:log4j-iostreams:2.8.1")
+    implementation("org.ow2.asm:asm:8.0.1")
+    implementation("com.googlecode.json-simple:json-simple:1.1.1")
+    runtimeOnly("org.xerial:sqlite-jdbc:3.32.3")
+    runtimeOnly("mysql:mysql-connector-java:5.1.49")
+    testImplementation("junit:junit:4.13.1")
+    testImplementation("org.hamcrest:hamcrest-library:1.3")
+}
+
+tasks.jar {
+    manifest {
+        attributes(mapOf(
+            "Main-Class" to "org.bukkit.craftbukkit.Main",
+            "Implementation-Title" to "CraftBukkit",
+            "Implementation-Vendor" to Instant.now(),
+            "Specification-Title" to "Bukkit",
+            "Specification-Version" to project.version,
+            "Specification-Vendor" to "Bukkit Team"
+        ))
+        for (tld in listOf("net", "com", "org")) {
+            attributes(mapOf(
+                "Sealed" to "true"
+            ), "$tld/bukkit")
+        }
+    }
+}
+
+tasks.shadowJar {
+    listOf(
+        "jline", "it.unimi", "org.apache.commons.codec", "org.apache.commons.io",
+        "org.apache.commons.lang3", "org.objectweb.asm"
+    ).forEach {  pack ->
+        relocate(pack, "org.bukkit.craftbukkit.libs.$pack")
+    }
+    relocate("org.bukkit.craftbukkit", "org.bukkit.craftbukkit.v$mcVersion") {
+        exclude("org.bukkit.craftbukkit.Main*")
+    }
+    relocate("net.minecraft.server", "net.minecraft.server.v$mcVersion")
+    transform(AppendingTransformer::class.java) {
+        resource = "META-INF/services/java.sql.Driver"
+    }
+}
+
+tasks.test {
+    exclude("org/bukkit/craftbukkit/inventory/ItemStack*Test.java")
+}
